# RESTful Application

## Stack
- Java
- Spring Boot
- Swagger
- PostgreSQL

## Description  
Реализовано RESTful приложение, которое дает доступ к базе данных, что содержит 2 связанных таблицы. Добавлено каскадное удаление.  

## Database
<p align="center">
  <img src="https://github.com/abserro/product-article-api/assets/107203406/a0db3ab2-0c30-4952-90b9-fe7d7f6b9d1b" width="70%" alt="UML Diagram" style="display: block; margin: 0 auto;">
</p>  

**Модель данных статьи:**
- Идентификатор (id)
- Идентификатор продукта, который описывает данная статья (productid)
- Название
- Контент
- Дата создания

**Модель данных продукта:**
- Идентификатор (id)
- Название
- Описание
- Стоимость внедрения

## Controllers

Приложение содержит два контроллера:

**Products:**
- Должен содержать эндпоинты для CRUD-операций с данными о продуктах компании.
- В ответе на запрос продукта(ов) должны содержаться статьи, относящиеся к этому продукту.
- Должна быть возможность отфильтровать/отсортировать продукты по определенному полю.

**Articles:**
- Должен содержать эндпоинты для CRUD-операций со статьями по продуктам.
- В ответе на запрос статьи(ей) должна содержаться полная информация о продукте, к которому она относится.
- Должна быть возможность отфильтровать/отсортировать статьи по определенному полю.

## Swagger
Документация API доступна на локальном хосте по адресу: [Swagger UI](http://localhost:8080/swagger-ui/index.html#/)

<img src="https://github.com/abserro/product-article-api/assets/107203406/75d3bf20-15cc-45d1-8b0f-06a21e6c2b1d" height="50%">  
<img src="https://github.com/abserro/product-article-api/assets/107203406/2f9dfbc1-6b1c-4edd-b44b-c977efd59ea5" height="50%">

### Эндпоинты продуктов  
  
| Эндпоинт                              | Метод | Путь                                     | Описание                                    |
| ------------------------------------ | ----- | ---------------------------------------- | ------------------------------------------- |
| Создание нового продукта             | POST  | /api/products                            | Создает новый продукт.                     |
| Получение продукта по ID             | GET   | /api/products/{id}                      | Получает информацию о продукте по его ID.   |
| Обновление продукта по ID           | PUT   | /api/products/{id}                      | Обновляет информацию о продукте по его ID. |
| Удаление продукта по ID             | DELETE| /api/products/{id}                      | Удаляет продукт по его ID.                 |
| Получение всех продуктов            | GET   | /api/products                            | Получает список всех продуктов.            |
| Получение статей по ID продукта      | GET   | /api/products/article/{productId}        | Получает статьи, относящиеся к продукту.    |
| Получение продуктов по диапазону стоимости | GET | /api/products/cost/range          | Получает продукты в заданном диапазоне стоимости. |
| Получение продуктов по названию      | GET   | /api/products/findByTitle/{title}      | Получает продукты по названию.             |
| Получение продуктов по фразе в описании | GET | /api/products/findByPhrase/{phrase}  | Получает продукты по фразе в описании.     |

### Эндпоинты статей  
  
| Эндпоинт                              | Метод | Путь                                           | Описание                                    |
| ------------------------------------ | ----- | ---------------------------------------------- | ------------------------------------------- |
| Создание новой статьи                | POST  | /api/articles                                 | Создает новую статью.                     |
| Получение статьи по ID               | GET   | /api/articles/{id}                            | Получает информацию о статье по её ID.     |
| Обновление статьи по ID             | PUT   | /api/articles/{id}                            | Обновляет информацию о статье по её ID.   |
| Удаление статьи по ID               | DELETE| /api/articles/{id}                            | Удаляет статью по её ID.                 |
| Получение всех статей               | GET   | /api/articles                                 | Получает список всех статей.              |
| Получение статей по ID продукта      | GET   | /api/articles/products/{productId}            | Получает статьи, относящиеся к продукту.  |
| Получение статей по дате создания    | GET   | /api/articles/dateCreated                     | Получает статьи, созданные в указанном временном диапазоне. |
| Получение статей по названию         | GET   | /api/articles/findByTitle/{title}            | Получает статьи по заданному названию.    |
| Получение статей по фразе в содержании| GET   | /api/articles/findByPhrase/{phrase}          | Получает статьи, содержащие указанную фразу в содержании. |

### Примеры запросов  

#### Post-запрос на добавление продукта

Для добавления нового продукта в систему, необходимо выполнить HTTP POST-запрос, предоставив JSON-объект следующего формата:

```json
{
  "title": "Название продукта",
  "description": "Описание продукта",
  "cost": 543.2
}
```

После успешного выполнения запроса, получим следующий ответ:

**Код ответа:** 201 Created

**Тело ответа:**

```json
{
  "id": 39,
  "title": "Название продукта",
  "description": "Описание продукта",
  "cost": 543.2
}
```

#### Get-запрос на вывод всех продуктов с использованием сортировки  
Путь: http://localhost:8080/api/products?sortField=id&sortDirection=asc  

Получаем ответ:  

Code 200  

Response body:  
```
[
  {
    "id": 3,
    "title": "Title2",
    "description": "Description2",
    "cost": 70.49327954429873
  },
  {
    "id": 4,
    "title": "Title3",
    "description": "Description3",
    "cost": 492.6939754374183
  },
...
]
```

#### Post-запрос на добавление статьи

Для добавления новой статьи в систему, необходимо выполнить HTTP POST-запрос, предоставив JSON-объект следующего формата:  

```json
{
  "title": "Название статьи",
  "product": {
    "id": 7
  },
  "content": "Содержание статьи"
}
```
Если указанный id продукта сущестует, то получим следующий ответ:

**Код ответа:** 201 Created
